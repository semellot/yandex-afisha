# yandex-afisha
 
Проект разработан для создания собственной интерактивной карты, в которой есть возможность добавлять собственные точки на карте с описанием и фотографиями.

Демо-версия сайта: http://semellot.pythonanywhere.com/

Административная панель: https://semellot.pythonanywhere.com/admin/

## Как установить

Для работы проекта вам понадобится Python 3.10:

1. Клонировать репозиторий:

  ```shell
  git clone https://github.com/semellot/yandex-afisha.git
  ```

2. Создать в каталоге с проектом файл `.env` с переменными окружения. Пример содержимого файла:

  ```
  DEBUG=True
  SECRET_KEY='key'
  ALLOWED_HOSTS='127.0.0.1'
  ```
  
  - DEBUG - включает/выключает режим откладки кода. Может иметь значения True или False. Для продуктовой версии сайта используйте False.
  - SECRET_KEY - секретный ключ проекта Django. Сгенерируйте новый уникальный код.
  - ALLOWED_HOSTS - список строк с именами доменов, которые может обслуживать этот сайт. Добавьте продуктовый домен на котором будет располагаться сайт.
  
  
3. Создать виртуальное окружение, затем запустить его:

  ```shell
  python3.10 -m vitualenv venv
  source venv/bin/activate
  ```

4. Установить зависимости:

  ```shell
  pip install -r requirements.txt
  ```

5. Создать базу данных `sqlite3`:

  ```shell
  python manage.py migrate
  ```

6. Запустить сайт локально:

  ```shell
  python manage.py runserver
  ```
  
  Перейти по адресу http://127.0.0.1:8000/
  
## Наполнение данными вручную

Чтобы на карте появились точки, необходимо добавить их через админку в модель `Place` http://127.0.0.1:8000/admin/places/place/:
- Заголовок
- Краткое описание
- Полное описание
- Координаты: долгота и широта
- Изображения

Создание пользователя для получения доступа в админку:

```shell
python manage.py createsuperuser
```

## Наполнение данными из JSON

Можно создавать места локаций из файла JSON с помощью команды `load_place`:

```shell
python manage.py load_place [json_url]
```

Пример файла JSON:

```json
{
  "title": "Заголовок",
  "imgs": [
    "http://link1/",
    "http://link2/",
  ],
  "description_short": "Краткое описание...",
  "description_long": "Полное описание...",
  "coordinates": {
    "lng": "[Координата долготы]",
    "lat": "[Координата широты]"
  }
}
```

## Цели проекта

Код написан в учебных целях — это урок в курсе по Python и веб-разработке на сайте [Devman](https://dvmn.org).

Тестовые данные взяты с сайта [KudaGo](https://kudago.com).
